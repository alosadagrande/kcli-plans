parameters:
 template: CentOS-7-x86_64-GenericCloud.qcow2
 memory: 8144
 disk_size: 20
 domain: localdomain
 pool: default
 branch: stable-3.2
 private_cidr: 10.0.0/24

cephpriv:
 type: network
 cidr: {{ private_cidr }}
 dhcp: false

{% for node in range(0, 3) %}
ceph0{{ node + 1 }}:
 template: {{ template }}
 memory: {{ memory }}
 nets:
 - default
 - name: cephpriv
   ip: 10.0.0.1{{ node }}
   mask: 255.255.255.0
 numcpus: 2
 disks:
  - size: 10
  - size: {{ disk_size }}
  - size: 10
 pool: {{ pool }}
 reservedns: true
 domain: {{ domain }}
 start: True
 sharedkey: True
 scripts:
 - pre.sh
{% if node == 0 %}
 - deploy.sh
 files:
 - all.yml
 - inventory
{% endif %}
{% endfor %}
