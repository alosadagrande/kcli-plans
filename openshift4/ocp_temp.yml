parameters:
 cluster: testk
 numcpus: 2
 memory: 1024
 disk_size: 10
 template: CentOS-7-x86_64-GenericCloud.qcow2
 masters: 1
 workers: 0
 network: default
 deploy_bootstrap: true
 deploy_helper: true

{% for num in range(0, masters) %}
{{ cluster }}-master-{{ num }}:
 template: {{ template }}
 numcpus: {{ numcpus }}
 memory: {{ memory }}
 nets:
  - name: {{ network }}
 disks:
  - size: {{ disk_size }}
{% endfor %}

{% for num in range(0, workers) %}
{{ cluster }}-worker-{{ num }}:
 template: {{ template }}
 numcpus: {{ numcpus }}
 memory: {{ memory }}
 nets:
  - name: {{ network }}
 disks:
  - size: {{ disk_size }}
{% endfor %}

{% if deploy_bootstrap %}
{{ cluster }}-bootstrap:
 template: {{ template }}
 numcpus: {{ numcpus }}
 memory: {{ memory }}
 nets:
  - name: {{ network }}
 disks:
  - size: {{ disk_size }}
{% endif %}

{% if deploy_helper %}
{{ cluster }}-helper:
 template: {{ template }}
 numcpus: {{ numcpus }}
 memory: {{ memory }}
 nets:
  - name: {{ network }}
 disks:
  - size: {{ disk_size }}
{% endif %}
